- options = {}
- options[:url] = @form_url if @form_url
- options.deep_merge!(data: {dialog: params[:dialog]}) if params[:dialog]
- options[:namespace] = params[:namespace] if params[:namespace]
- options[:remote] = true

= ekylibre_form_for(resource, options) do |f|
  - f.add(:submit, :update.tl, data: {disable_with: :please_wait.tl}, class: 'primary')

  - if params[:form_partial]
    = f.fields(params[:form_partial])
  - else
    = f.fields
  - f.add(:submit, :cancel.tl, class: 'btn', onclick: "$('tr').not('.edit-form').not($('.edit-form').prev('tr')).toggleClass('disabled-row'); $(this).closest('tr.edit-form').remove(); return false;" )
  = f.actions
