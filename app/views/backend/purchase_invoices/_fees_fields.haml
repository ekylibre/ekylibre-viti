- item ||= f.object

.form-field.role-row.role-row--non-merchandise
  .item-block-role
    :ruby
      options = {
        label: f.object.role.tl,
        source: {scope: :purchaseables_services},
        input_html: {
          class: "invoice-variant",
          data: {
            variant_of_deal_item: {
              url: detail_backend_product_nature_variant_path("RECORD_ID", mode: :last_purchase_item)
            },
            product_of_delivery_item: {url: backend_product_nature_variant_path("RECORD_ID", format: :json)},
            required: true
          }
        }
      }
    = f.referenced_association(:variant, **options)

  .storing-calculation
    .storing-quantifier.storing-quantifier--fee
      = f.input :quantity, wrapper: :append do
        = f.input_field :quantity, class: "invoice-quantity", placeholder: '0', size: 7, data: {trade_component: "quantity", required: true}


